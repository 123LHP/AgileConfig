(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{et2T:function(A,S,a){A.exports={summary:"summary___3-hGY",item:"item___2S4GX",name:"name___GPVZC",icon:"icon___1Ex7k",count:"count___1ev27",node_clients:"node_clients___3eye8",panel:"panel___JErwR"}},yZnS:function(A,S,a){"use strict";a.r(S);var y=a("tJVT"),G=a("tMyG"),s=a("q1tI"),H=a("WmNS"),l=a.n(H),O=a("9og8"),p=a("sy1d");function V(){return N.apply(this,arguments)}function N(){return N=Object(O.a)(l.a.mark(function c(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p.a)("/report/appcount"));case 1:case"end":return t.stop()}},c)})),N.apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){return x=Object(O.a)(l.a.mark(function c(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p.a)("/report/configcount"));case 1:case"end":return t.stop()}},c)})),x.apply(this,arguments)}function J(){return I.apply(this,arguments)}function I(){return I=Object(O.a)(l.a.mark(function c(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p.a)("/report/nodecount"));case 1:case"end":return t.stop()}},c)})),I.apply(this,arguments)}function P(){return E.apply(this,arguments)}function E(){return E=Object(O.a)(l.a.mark(function c(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p.a)("/report/RemoteNodesStatus"));case 1:case"end":return t.stop()}},c)})),E.apply(this,arguments)}var k=a("26re"),M=a("+GxG"),R=a("U+PY"),U=a("uAnT"),Y=a("et2T"),d=a.n(Y),T=a("9kvl"),n=a("nKUr"),Z=function(e){var t=Object(T.h)(),o=function(){return e.type=="node"?"#1890ff":e.type=="app"?"#faad14":e.type=="config"?"#13c2c2":e.type=="client"?"#52c41a":""},u=function(){var r="pages.home.summary."+e.type,v=t.formatMessage({id:r});return v};return Object(n.jsxs)("div",{className:d.a.item,style:{backgroundColor:o()},onClick:function(){var r=e.link;r&&T.f.push(r)},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:d.a.count,children:e.count}),Object(n.jsx)("div",{className:d.a.name,children:u()})]}),Object(n.jsx)("div",{className:d.a.icon,children:e.icon})]})},C=Z,B=function(e){var t,o=Object(s.useState)(0),u=Object(y.a)(o,2),i=u[0],r=u[1],v=Object(s.useState)(0),f=Object(y.a)(v,2),j=f[0],b=f[1],g=Object(s.useState)(0),m=Object(y.a)(g,2),F=m[0],L=m[1];return Object(s.useEffect)(function(){J().then(function(h){return L(h)})},[]),Object(s.useEffect)(function(){w().then(function(h){return b(h)})},[]),Object(s.useEffect)(function(){V().then(function(h){return r(h)})},[]),Object(n.jsx)("div",{className:d.a.panel,children:Object(n.jsxs)("div",{className:d.a.summary,children:[Object(n.jsx)(C,{count:F,type:"node",link:"/node",icon:Object(n.jsx)(k.a,{})}),Object(n.jsx)(C,{count:i,type:"app",link:"/app",icon:Object(n.jsx)(M.a,{})}),Object(n.jsx)(C,{count:j,type:"config",link:"/app",icon:Object(n.jsx)(R.a,{})}),Object(n.jsx)(C,{count:(t=e.clientCount)!==null&&t!==void 0?t:0,type:"client",link:"/client",icon:Object(n.jsx)(U.a,{})})]})})},D=B,K=a("MT78"),W=function(e){return Object(s.useEffect)(function(){var t=document.getElementById("nodeClientsChart");if(t){var o,u,i,r,v=K.a(t),f={legend:{data:["\u5BA2\u6237\u7AEF\u6570\u91CF"]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{},xAxis:{type:"category",data:(o=(u=e.nodeStatiInfo)===null||u===void 0?void 0:u.chartCategorys)!==null&&o!==void 0?o:[]},yAxis:{type:"value"},series:[{name:"\u5BA2\u6237\u7AEF\u6570\u91CF",data:(i=(r=e.nodeStatiInfo)===null||r===void 0?void 0:r.chartValues)!==null&&i!==void 0?i:[],type:"bar"}]};v.setOption(f)}},[e.nodeStatiInfo]),Object(n.jsx)("div",{className:d.a.panel,children:Object(n.jsx)("div",{id:"nodeClientsChart",className:d.a.node_clients})})},X=W,z=function(){var e,t=Object(s.useState)({clientCount:0,nodeStatiInfo:null}),o=Object(y.a)(t,2),u=o[0],i=o[1],r=function(){P().then(function(f){var j=0,b=[],g=[];f==null||f.forEach(function(m){m.server_status&&(j=j+m.server_status.clientCount),b.push(m.n.address),g.push(m.server_status.clientCount)}),i({clientCount:j,nodeStatiInfo:{chartCategorys:b,chartValues:g}})})};return Object(s.useEffect)(function(){r()},[]),Object(s.useEffect)(function(){var v=setInterval(function(){r()},5e3);return function(){return clearInterval(v)}},[]),Object(n.jsxs)(G.a,{pageHeaderRender:!1,children:[Object(n.jsx)(D,{clientCount:u.clientCount}),((e=u.nodeStatiInfo)===null||e===void 0?void 0:e.chartCategorys.length)>1&&Object(n.jsx)(X,{nodeStatiInfo:u.nodeStatiInfo})]})},Q=S.default=z}}]);
