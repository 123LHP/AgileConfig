(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{FCkD:function(A,S,a){"use strict";a.r(S);var y=a("tJVT"),T=a("tMyG"),c=a("q1tI"),B=a("WmNS"),s=a.n(B),O=a("9og8"),C=a("sy1d");function G(){return N.apply(this,arguments)}function N(){return N=Object(O.a)(s.a.mark(function u(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(C.a)("/report/appcount"));case 1:case"end":return t.stop()}},u)})),N.apply(this,arguments)}function U(){return x.apply(this,arguments)}function x(){return x=Object(O.a)(s.a.mark(function u(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(C.a)("/report/configcount"));case 1:case"end":return t.stop()}},u)})),x.apply(this,arguments)}function V(){return I.apply(this,arguments)}function I(){return I=Object(O.a)(s.a.mark(function u(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(C.a)("/report/nodecount"));case 1:case"end":return t.stop()}},u)})),I.apply(this,arguments)}function k(){return E.apply(this,arguments)}function E(){return E=Object(O.a)(s.a.mark(function u(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(C.a)("/report/RemoteNodesStatus"));case 1:case"end":return t.stop()}},u)})),E.apply(this,arguments)}var w=a("26re"),D=a("+GxG"),J=a("U+PY"),P=a("uAnT"),K=a("U0+B"),l=a.n(K),L=a("9kvl"),n=a("nKUr"),M=function(e){var t=function(){return e.type=="node"?"#1890ff":e.type=="app"?"#faad14":e.type=="config"?"#13c2c2":e.type=="client"?"#52c41a":""},i=function(){return e.type=="node"?"\u8282\u70B9":e.type=="app"?"\u5E94\u7528":e.type=="config"?"\u914D\u7F6E":e.type=="client"?"\u5BA2\u6237\u7AEF":""};return Object(n.jsxs)("div",{className:l.a.item,style:{backgroundColor:t()},onClick:function(){var o=e.link;o&&L.d.push(o)},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:l.a.count,children:e.count}),Object(n.jsx)("div",{className:l.a.name,children:i()})]}),Object(n.jsx)("div",{className:l.a.icon,children:e.icon})]})},p=M,R=function(e){var t,i=Object(c.useState)(0),r=Object(y.a)(i,2),o=r[0],d=r[1],j=Object(c.useState)(0),f=Object(y.a)(j,2),m=f[0],b=f[1],g=Object(c.useState)(0),v=Object(y.a)(g,2),X=v[0],z=v[1];return Object(c.useEffect)(function(){V().then(function(h){return z(h)})},[]),Object(c.useEffect)(function(){U().then(function(h){return b(h)})},[]),Object(c.useEffect)(function(){G().then(function(h){return d(h)})},[]),Object(n.jsx)("div",{className:l.a.panel,children:Object(n.jsxs)("div",{className:l.a.summary,children:[Object(n.jsx)(p,{count:X,type:"node",link:"/node",icon:Object(n.jsx)(w.a,{})}),Object(n.jsx)(p,{count:o,type:"app",link:"/app",icon:Object(n.jsx)(D.a,{})}),Object(n.jsx)(p,{count:m,type:"config",link:"/app",icon:Object(n.jsx)(J.a,{})}),Object(n.jsx)(p,{count:(t=e.clientCount)!==null&&t!==void 0?t:0,type:"client",link:"/client",icon:Object(n.jsx)(P.a,{})})]})})},W=R,Y=a("MT78"),F=function(e){return Object(c.useEffect)(function(){var t=document.getElementById("nodeClientsChart");if(t){var i,r,o,d,j=Y.a(t),f={legend:{data:["\u5BA2\u6237\u7AEF\u6570\u91CF"]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{},xAxis:{type:"category",data:(i=(r=e.nodeStatiInfo)===null||r===void 0?void 0:r.chartCategorys)!==null&&i!==void 0?i:[]},yAxis:{type:"value"},series:[{name:"\u5BA2\u6237\u7AEF\u6570\u91CF",data:(o=(d=e.nodeStatiInfo)===null||d===void 0?void 0:d.chartValues)!==null&&o!==void 0?o:[],type:"bar"}]};j.setOption(f)}},[e.nodeStatiInfo]),Object(n.jsx)("div",{className:l.a.panel,children:Object(n.jsx)("div",{id:"nodeClientsChart",className:l.a.node_clients})})},H=F,Q=function(){var e,t=Object(c.useState)({clientCount:0,nodeStatiInfo:null}),i=Object(y.a)(t,2),r=i[0],o=i[1],d=function(){k().then(function(f){var m=0,b=[],g=[];f==null||f.forEach(function(v){v.server_status&&(m=m+v.server_status.clientCount),b.push(v.n.address),g.push(v.server_status.clientCount)}),o({clientCount:m,nodeStatiInfo:{chartCategorys:b,chartValues:g}})})};return Object(c.useEffect)(function(){d()},[]),Object(c.useEffect)(function(){var j=setInterval(function(){d()},5e3);return function(){return clearInterval(j)}},[]),Object(n.jsxs)(T.a,{pageHeaderRender:!1,children:[Object(n.jsx)(W,{clientCount:r.clientCount}),((e=r.nodeStatiInfo)===null||e===void 0?void 0:e.chartCategorys.length)>1&&Object(n.jsx)(H,{nodeStatiInfo:r.nodeStatiInfo})]})},Z=S.default=Q},"U0+B":function(A,S,a){A.exports={summary:"summary___i4Xao",item:"item___v3ktc",name:"name___3LBNt",icon:"icon___2KhbQ",count:"count___3tgS7",node_clients:"node_clients___1LaDI",panel:"panel___3NWYT"}}}]);
